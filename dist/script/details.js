"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],r=!0,a=!1,n=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done)&&(i.push(l.value),!e||i.length!==e);r=!0);}catch(t){a=!0,n=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw n}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_createClass=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}(),_util=require("./util/util.js"),_DOMutil=require("./util/DOMutil.js"),_effect=require("./effect/effect.js");function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Detail=function(){function t(){_classCallCheck(this,t),this.gid=window.location.search.substring(5),this.$main=(0,_DOMutil.$)("#body_wrap"),this.pics=null,this.$header=(0,_DOMutil.$)("#header-search")}return _createClass(t,[{key:"init",value:function(){this.render(),new _effect.StickHeader(this.$header).init()}},{key:"render",value:function(){var a=this;(0,_util.ajax)({url:"http://localhost/test/mogu/php/good_detail.php",data:{gid:this.gid},dataType:"json"}).then(function(t){var e=_slicedToArray(t,1)[0];console.log(e),(0,_DOMutil.$)("title").html(e.name),a.pics=e.picurls.split(";");var i="";a.pics.forEach(function(t){i+="<li><img src="+t+"><i></i></li>"});var r=a.$main.children().clone({"data-name-span":{text:e.name},"data-price-span":{text:"ï¿¥"+e.price},"data-bpic-img":{src:a.pics[0]},"data-spics-ul":{text:i}},"text");a.$main.html(r),a.spicEffect(e)})}},{key:"spicEffect",value:function(){(0,_DOMutil.$)("#spics").children().on("mouseover",function(){this.addClass("c").lastChild().show(),this.siblings().removeClass("c").each(function(t){t.lastChild().hide()}),(0,_DOMutil.$)(".big-img").children().attr("src",this.firstChild().attr("src"))})}}]),t}();exports.default=Detail;